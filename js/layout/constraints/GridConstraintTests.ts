// Copyright 2024, University of Colorado Boulder

/**
 * Unit tests for GridConstraint.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */

// I want to use spread to work with options easily in this testing file.
/* eslint-disable no-object-spread-on-non-literals */

import PixelComparisonTestUtils from '../../tests/PixelComparisonTestUtils.js';
import Rectangle from '../../nodes/Rectangle.js';
import GridBox from '../nodes/GridBox.js';

QUnit.module( 'GridConstraint' );

const DEFAULT_THRESHOLD = PixelComparisonTestUtils.DEFAULT_THRESHOLD;
const testedRenderers = PixelComparisonTestUtils.TESTED_RENDERERS;

if ( PixelComparisonTestUtils.platformSupportsPixelComparisonTests() ) {

  //---------------------------------------------------------------------------------
  // Pixel Comparison: Simple GridConstraint
  //---------------------------------------------------------------------------------
  const simpleGridConstraintUrl = 'data:image/png;base64,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';
  PixelComparisonTestUtils.multipleRendererTest( 'Simple GridConstraint',
    ( scene, display ) => {
      display.width = 400;
      display.height = 400;

      const topOptions = {
        sizable: true
      };
      const topLayoutOptions = {
        row: 0,
        minContentWidth: 50,
        minContentHeight: 50
      };

      const box = new GridBox( {
        stretch: true,
        children: [
          new Rectangle( {
            fill: 'red',
            layoutOptions: { column: 0, grow: 1, maxContentWidth: 100, ...topLayoutOptions }, ...topOptions
          } ),
          new Rectangle( { fill: 'orange', layoutOptions: { column: 1, grow: 1, ...topLayoutOptions }, ...topOptions } ),
          new Rectangle( { fill: 'yellow', layoutOptions: { column: 2, ...topLayoutOptions }, ...topOptions } ),
          new Rectangle( { fill: 'green', layoutOptions: { column: 3, ...topLayoutOptions }, ...topOptions } ),
          new Rectangle( { fill: 'blue', layoutOptions: { column: 4, ...topLayoutOptions }, ...topOptions } )
        ]
      } );

      scene.addChild( box );

      display.updateDisplay();
    }, simpleGridConstraintUrl,
    DEFAULT_THRESHOLD, testedRenderers
  );

  //---------------------------------------------------------------------------------
  // Pixel Comparison: GridConstraint with width limits
  //---------------------------------------------------------------------------------
  const growWithMinMaxWidthsUrl = 'data:image/png;base64,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020IECBAgACBAAEFKyAEIxAgQIAAAQK7BBSsXXm6DQECBAgQIBAgoGAFhGAEAgQIECBAYJeAgrUrT7chQIAAAQIEAgQUrIAQjECAAAECBAjsElCwduXpNgQIECBAgECAgIIVEIIRCBAgQIAAgV0CCtauPN2GAAECBAgQCBBQsAJCMAIBAgQIECCwS0DB2pWn2xAgQIAAAQIBAgpWQAhGIECAAAECBHYJKFi78nQbAgQIECBAIEBAwQoIwQgECBAgQIDALgEFa1eebkOAAAECBAgECChYASEYgQABAgQIENgloGDtytNtCBAgQIAAgQABBSsgBCMQIECAAAECuwQUrF15ug0BAgQIECAQIKBgBYRgBAIECBAgQGCXgIK1K0+3IUCAAAECBAIEFKyAEIxAgAABAgQI7BJQsHbl6TYECBAgQIBAgICCFRCCEQgQIECAAIFdAgrWrjzdhgABAgQIEAgQULACQjACAQIECBAgsEtAwdqVp9sQIECAAAECAQIKVkAIRiBAgAABAgR2CShYu/J0GwIECBAgQCBAQMEKCMEIBAgQIECAwC4BBWtXnm5DgAABAgQIBAgoWAEhGIEAAQIECBDYJaBg7crTbQgQIECAAIEAAQUrIAQjECBAgAABArsEFKxdeboNAQIECBAgECCgYAWEYAQCBAgQIEBgl4CCtStPtyFAgAABAgQCBBSsgBCMQIAAAQIECOwSULB25ek2BAgQIECAQICAghUQghEIECBAgACBXQIK1q483YYAAQIECBAIEFCwAkIwAgECBAgQILBLQMHalafbECBAgAABAgECClZACEYgQIAAAQIEdgkoWLvydBsCBAgQIEAgQEDBCgjBCAQIECBAgMAuAQVrV55uQ4AAAQIECAQIKFgBIRiBAAECBAgQ2CWgYO3K020IECBAgACBAAEFKyAEIxAgQIAAAQK7BBSsXXm6DQECBAgQIBAgoGAFhGAEAgQIECBAYJeAgrUrT7chQIAAAQIEAgQUrIAQjECAAAECBAjsElCwduXpNgQIECBAgECAgIIVEIIRCBAgQIAAgV0CCtauPN2GAAECBAgQCBBQsAJCMAIBAgQIECCwS0DB2pWn2xAgQIAAAQIBAgpWQAhGIECAAAECBHYJKFi78nQbAgQIECBAIEBAwQoIwQgECBAgQIDALgEFa1eebkOAAAECBAgECChYASEYgQABAgQIENgloGDtytNtCBAgQIAAgQABBSsgBCMQIECAAAECuwQUrF15ug0BAgQIECAQIKBgBYRgBAIECBAgQGCXgIK1K0+3IUCAAAECBAIEFKyAEIxAgAABAgQI7BJQsHbl6TYECBAgQIBAgICCFRCCEQgQIECAAIFdAgrWrjzdhgABAgQIEAgQULACQjACAQIECBAgsEtAwdqVp9sQIECAAAECAQIKVkAIRiBAgAABAgR2CShYu/J0GwIECBAgQCBAQMEKCMEIBAgQIECAwC4BBWtXnm5DgAABAgQIBAgoWAEhGIEAAQIECBDYJaBg7crTbQgQIECAAIEAAQUrIAQjECBAgAABArsEFKxdeboNAQIECBAgECCgYAWEYAQCBAgQIEBgl4CCtStPtyFAgAABAgQCBBSsgBCMQIAAAQIECOwSULB25ek2BAgQIECAQICAghUQghEIECBAgACBXQIK1q483YYAAQIECBAIEFCwAkIwAgECBAgQILBLQMHalafbECBAgAABAgECClZACEYgQIAAAQIEdgkoWLvydBsCBAgQIEAgQEDBCgjBCAQIECBAgMAuAQVrV55uQ4AAAQIECAQIKFgBIRiBAAECBAgQ2CXwX2GoJ0v/GLPWAAAAAElFTkSuQmCC';
  PixelComparisonTestUtils.multipleRendererTest( 'Grow with min/max width constraints',
    ( scene, display ) => {
      display.width = 600;
      display.height = 300;

      const topOptions = {
        sizable: true
      };
      const topLayoutOptions = {
        row: 0,
        minContentWidth: 50,
        minContentHeight: 50
      };

      const box = new GridBox( {
        stretch: true,
        children: [
          new Rectangle( {
            fill: 'red',
            layoutOptions: { column: 0, grow: 1, maxContentWidth: 100, ...topLayoutOptions }, ...topOptions
          } ),
          new Rectangle( { fill: 'orange', layoutOptions: { column: 1, grow: 1, ...topLayoutOptions }, ...topOptions } ),
          new Rectangle( { fill: 'yellow', layoutOptions: { column: 2, ...topLayoutOptions }, ...topOptions } ),
          new Rectangle( { fill: 'green', layoutOptions: { column: 3, ...topLayoutOptions }, ...topOptions } ),
          new Rectangle( { fill: 'blue', layoutOptions: { column: 4, ...topLayoutOptions }, ...topOptions } ),

          new Rectangle( 0, 0, 350, 50, { fill: 'black', layoutOptions: { row: 1, column: 0, horizontalSpan: 2 } } ),
          new Rectangle( 0, 0, 300, 50, { fill: 'black', layoutOptions: { row: 2, column: 1, horizontalSpan: 2 } } ),
          new Rectangle( 0, 0, 300, 50, { fill: 'black', layoutOptions: { row: 3, column: 1, horizontalSpan: 2 } } )
        ]
      } );

      scene.addChild( box );

      display.updateDisplay();
    }, growWithMinMaxWidthsUrl,
    DEFAULT_THRESHOLD, testedRenderers
  );
}