/* eslint-disable */
import drawtag from './shared/drawtag.js';
import clip from './shared/clip.js';
import bbox from './shared/bbox.js';
import config from './shared/config.js';
import pre from './shared/pre.js';

export default `${pre}${config}
${bbox}
${clip}
${drawtag}
@group(0)@binding(0)var<uniform>j:aM;@group(0)@binding(1)var<storage>cT:array<eq>;@group(0)@binding(2)var<storage>bL:array<c6>;@group(0)@binding(3)var<storage>aK:array<aX>;@group(0)@binding(4)var<storage>h7:array<fv>;@group(0)@binding(5)var<storage,read_write>b0:array<aL>;@group(0)@binding(6)var<storage,read_write>h6:array<Z>;const k=256u;var<workgroup>aJ:array<aX,510>;var<workgroup>gm:array<d,k>;var<workgroup>dC:array<Z,k>;var<workgroup>d7:array<Z,k>;var<workgroup>d6:array<i,k>;fn h9(ah:ptr<function,aX>,h5:d)->i{var l=h5;var bz=0u;while bz<firstTrailingBit(k){let ai=2u*k-(2u<<(firstTrailingBit(k)-bz));if((l>>bz)&1u)!=0u{let dD=dQ(aJ[ai+(l>>bz)- 1u],*ah);if dD.b>0u{break;}*ah=dD;l-=1u<<bz;}bz+=1u;}if l>0u{while bz>0u{bz-=1u;let ai=2u*k-(2u<<(firstTrailingBit(k)-bz));let dD=dQ(aJ[ai+(l>>bz)- 1u],*ah);if dD.b==0u{*ah=dD;l-=1u<<bz;}}}if l>0u{return i(l)- 1;}else{return i(~0u-(*ah).a);}}fn h8(l:d)->i{if l<j.eo{return cT[l].W;}else{return-2147483648;}}@compute @workgroup_size(256)fn main(@builtin(global_invocation_id)J:I,@builtin(local_invocation_id)f:I,@builtin(workgroup_id)al:I){var ah:aX;if f.x<al.x{ah=aK[f.x];}aJ[f.x]=ah;for(var e=0u;e<firstTrailingBit(k);e+=1u){workgroupBarrier();if f.x+(1u<<e)<k{let ao=aJ[f.x+(1u<<e)];ah=dQ(ah,ao);}workgroupBarrier();aJ[f.x]=ah;}workgroupBarrier();let ff=aJ[0].b;let fe=k- 1u-f.x;var l=0u;for(var e=0u;e<firstTrailingBit(k);e+=1u){let bB=l+((k/2u)>>e);if fe<aJ[bB].b{l=bB;}}let b=aJ[l].b;var h=vec4(-1e9,-1e9,1e9,1e9);if fe<b{let gs=h7[l*k+b-fe- 1u];gm[f.x]=gs.dP;h=gs.h;}for(var e=0u;e<firstTrailingBit(k);e+=1u){dC[f.x]=h;workgroupBarrier();if f.x>=(1u<<e){h=dR(dC[f.x-(1u<<e)],h);}workgroupBarrier();}dC[f.x]=h;let cU=h8(J.x);let cd=cU>=0;ah=aX(1u-d(cd),d(cd));aJ[f.x]=ah;if cd{let aP=bL[cU];h=vec4(c(aP.F),c(aP.N),c(aP.O),c(aP.R));}else{h=vec4(-1e9,-1e9,1e9,1e9);}var gn=0u;for(var e=0u;e<firstTrailingBit(k)- 1u;e+=1u){let gq=2u*k-(1u<<(firstTrailingBit(k)-e));workgroupBarrier();if f.x<1u<<(firstTrailingBit(k)- 1u-e){let gp=gn+f.x*2u;aJ[gq+f.x]=dQ(aJ[gp],aJ[gp+1u]);}gn=gq;}workgroupBarrier();ah=aX();var aO=h9(&ah,f.x);d6[f.x]=aO;workgroupBarrier();let d8=select(aO- 1,d6[aO],aO>=0);var dB:i;if aO>=0{dB=i(al.x*k)+aO;}else if aO+i(ff)>=0{dB=i(gm[i(k)+aO]);}else{dB=-1;}for(var e=0u;e<firstTrailingBit(k);e+=1u){if e!=0u{d6[f.x]=aO;}d7[f.x]=h;workgroupBarrier();if aO>=0{h=dR(d7[aO],h);aO=d6[aO];}workgroupBarrier();}if aO+i(ff)>=0{h=dR(dC[i(k)+aO],h);}d7[f.x]=h;workgroupBarrier();if!cd&&J.x<j.eo{let go=cT[dB];let W=go.W;let dP=go.l;let l=~cU;b0[l].W=d(W);b0[l].bG=b0[dP].bG;if d8>=0{h=d7[d8];}else if d8+i(ff)>=0{h=dC[i(k)+d8];}else{h=vec4(-1e9,-1e9,1e9,1e9);}}if J.x<j.eo{h6[J.x]=h;}}`
