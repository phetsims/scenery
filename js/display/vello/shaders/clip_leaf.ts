/* eslint-disable */
import drawtag from './shared/drawtag.js';
import clip from './shared/clip.js';
import bbox from './shared/bbox.js';
import config from './shared/config.js';
import pre from './shared/pre.js';

export default `${pre}${config}
${bbox}
${clip}
${drawtag}
@group(0)@binding(0)var<uniform>n:aT;@group(0)@binding(1)var<storage>cY:array<eE>;@group(0)@binding(2)var<storage>bO:array<da>;@group(0)@binding(3)var<storage>aO:array<a6>;@group(0)@binding(4)var<storage>ih:array<fA>;@group(0)@binding(5)var<storage,read_write>b3:array<aS>;@group(0)@binding(6)var<storage,read_write>ig:array<L>;const o=256u;var<workgroup>aN:array<a6,510>;var<workgroup>gw:array<j,o>;var<workgroup>dF:array<L,o>;var<workgroup>ek:array<L,o>;var<workgroup>ej:array<m,o>;fn ij(am:ptr<function,a6>,ie:j)->m{var p=ie;var bF=e;while bF<firstTrailingBit(o){let aQ=2u*o-(2u<<(firstTrailingBit(o)-bF));if((p>>bF)&f)!=e{let dG=dT(aN[aQ+(p>>bF)-f],*am);if dG.b>e{break;}*am=dG;p-=f<<bF;}bF+=f;}if p>e{while bF>e{bF-=f;let aQ=2u*o-(2u<<(firstTrailingBit(o)-bF));let dG=dT(aN[aQ+(p>>bF)- f],*am);if dG.b==e{*am=dG;p-=f<<bF;}}}if p>e{return m(p)- 1;}else{return m(~e-(*am).a);}}fn ii(p:j)->m{if p<n.eC{return cY[p].ac;}else{return-2147483648;}}@compute @workgroup_size(256)fn main(@builtin(global_invocation_id)N:M,@builtin(local_invocation_id)k:M,@builtin(workgroup_id)ap:M){var am:a6;if k.x<ap.x{am=aO[k.x];}aN[k.x]=am;for(var i=e;i<firstTrailingBit(o);i+=f){workgroupBarrier();if k.x+(f<<i)<o{let au=aN[k.x+(f<<i)];am=dT(am,au);}workgroupBarrier();aN[k.x]=am;}workgroupBarrier();let fk=aN[0].b;let fj=o- f-k.x;var p=e;for(var i=e;i<firstTrailingBit(o);i+=f){let bH=p+((o/2u)>>i);if fj<aN[bH].b{p=bH;}}let b=aN[p].b;var l=vec4(-1e9,-1e9,1e9,1e9);if fj<b{let gB=ih[p*o+b-fj- f];gw[k.x]=gB.dS;l=gB.l;}for(var i=e;i<firstTrailingBit(o);i+=f){dF[k.x]=l;workgroupBarrier();if k.x>=(f<<i){l=dU(dF[k.x-(f<<i)],l);}workgroupBarrier();}dF[k.x]=l;let cZ=ii(N.x);let cd=cZ>=0;am=a6(f-j(cd),j(cd));aN[k.x]=am;if cd{let aW=bO[cZ];l=vec4(h(aW.J),h(aW.S),h(aW.T),h(aW.V));}else{l=vec4(-1e9,-1e9,1e9,1e9);}var gx=e;for(var i=e;i<firstTrailingBit(o)- f;i+=f){let gA=2u*o-(f<<(firstTrailingBit(o)-i));workgroupBarrier();if k.x<f<<(firstTrailingBit(o)- f-i){let gz=gx+k.x*2u;aN[gA+k.x]=dT(aN[gz],aN[gz+f]);}gx=gA;}workgroupBarrier();am=a6();var aV=ij(&am,k.x);ej[k.x]=aV;workgroupBarrier();let el=select(aV- 1,ej[aV],aV>=0);var dE:m;if aV>=0{dE=m(ap.x*o)+aV;}else if aV+m(fk)>=0{dE=m(gw[m(o)+aV]);}else{dE=-1;}for(var i=e;i<firstTrailingBit(o);i+=f){if i!=e{ej[k.x]=aV;}ek[k.x]=l;workgroupBarrier();if aV>=0{l=dU(ek[aV],l);aV=ej[aV];}workgroupBarrier();}if aV+m(fk)>=0{l=dU(dF[m(o)+aV],l);}ek[k.x]=l;workgroupBarrier();if!cd&&N.x<n.eC{let gy=cY[dE];let ac=gy.ac;let dS=gy.p;let p=~cZ;b3[p].ac=j(ac);b3[p].bJ=b3[dS].bJ;if el>=0{l=ek[el];}else if el+m(fk)>=0{l=dF[m(o)+el];}else{l=vec4(-1e9,-1e9,1e9,1e9);}}if N.x<n.eC{ig[N.x]=l;}}`
