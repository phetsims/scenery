/* eslint-disable */
import drawtag from './shared/drawtag.js';
import clip from './shared/clip.js';
import bbox from './shared/bbox.js';
import config from './shared/config.js';
import pre from './shared/pre.js';

export default `${pre}${config}
${bbox}
${clip}
${drawtag}
@group(0)@binding(0)var<uniform>n:aV;@group(0)@binding(1)var<storage>cZ:array<eF>;@group(0)@binding(2)var<storage>bP:array<db>;@group(0)@binding(3)var<storage>aQ:array<a7>;@group(0)@binding(4)var<storage>ii:array<fC>;@group(0)@binding(5)var<storage,read_write>b4:array<aU>;@group(0)@binding(6)var<storage,read_write>ih:array<L>;const o=256u;var<workgroup>aP:array<a7,510>;var<workgroup>gy:array<j,o>;var<workgroup>dG:array<L,o>;var<workgroup>el:array<L,o>;var<workgroup>ek:array<m,o>;fn ik(am:ptr<function,a7>,ig:j)->m{var p=ig;var bG=e;while bG<firstTrailingBit(o){let aS=2u*o-(2u<<(firstTrailingBit(o)-bG));if((p>>bG)&f)!=e{let dH=dU(aP[aS+(p>>bG)-f],*am);if dH.b>e{break;}*am=dH;p-=f<<bG;}bG+=f;}if p>e{while bG>e{bG-=f;let aS=2u*o-(2u<<(firstTrailingBit(o)-bG));let dH=dU(aP[aS+(p>>bG)- f],*am);if dH.b==e{*am=dH;p-=f<<bG;}}}if p>e{return m(p)- 1;}else{return m(~e-(*am).a);}}fn ij(p:j)->m{if p<n.eD{return cZ[p].ac;}else{return-2147483648;}}@compute @workgroup_size(256)fn main(@builtin(global_invocation_id)N:M,@builtin(local_invocation_id)k:M,@builtin(workgroup_id)ap:M){var am:a7;if k.x<ap.x{am=aQ[k.x];}aP[k.x]=am;for(var i=e;i<firstTrailingBit(o);i+=f){workgroupBarrier();if k.x+(f<<i)<o{let au=aP[k.x+(f<<i)];am=dU(am,au);}workgroupBarrier();aP[k.x]=am;}workgroupBarrier();let fm=aP[0].b;let fl=o- f-k.x;var p=e;for(var i=e;i<firstTrailingBit(o);i+=f){let bI=p+((o/2u)>>i);if fl<aP[bI].b{p=bI;}}let b=aP[p].b;var l=vec4(-1e9,-1e9,1e9,1e9);if fl<b{let gD=ii[p*o+b-fl- f];gy[k.x]=gD.dT;l=gD.l;}for(var i=e;i<firstTrailingBit(o);i+=f){dG[k.x]=l;workgroupBarrier();if k.x>=(f<<i){l=dV(dG[k.x-(f<<i)],l);}workgroupBarrier();}dG[k.x]=l;let c_=ij(N.x);let ce=c_>=0;am=a7(f-j(ce),j(ce));aP[k.x]=am;if ce{let aY=bP[c_];l=vec4(h(aY.J),h(aY.S),h(aY.T),h(aY.V));}else{l=vec4(-1e9,-1e9,1e9,1e9);}var gz=e;for(var i=e;i<firstTrailingBit(o)- f;i+=f){let gC=2u*o-(f<<(firstTrailingBit(o)-i));workgroupBarrier();if k.x<f<<(firstTrailingBit(o)- f-i){let gB=gz+k.x*2u;aP[gC+k.x]=dU(aP[gB],aP[gB+f]);}gz=gC;}workgroupBarrier();am=a7();var aX=ik(&am,k.x);ek[k.x]=aX;workgroupBarrier();let em=select(aX- 1,ek[aX],aX>=0);var dF:m;if aX>=0{dF=m(ap.x*o)+aX;}else if aX+m(fm)>=0{dF=m(gy[m(o)+aX]);}else{dF=-1;}for(var i=e;i<firstTrailingBit(o);i+=f){if i!=e{ek[k.x]=aX;}el[k.x]=l;workgroupBarrier();if aX>=0{l=dV(el[aX],l);aX=ek[aX];}workgroupBarrier();}if aX+m(fm)>=0{l=dV(dG[m(o)+aX],l);}el[k.x]=l;workgroupBarrier();if!ce&&N.x<n.eD{let gA=cZ[dF];let ac=gA.ac;let dT=gA.p;let p=~c_;b4[p].ac=j(ac);b4[p].bK=b4[dT].bK;if em>=0{l=el[em];}else if em+m(fm)>=0{l=dG[m(o)+em];}else{l=vec4(-1e9,-1e9,1e9,1e9);}}if N.x<n.eD{ih[N.x]=l;}}`
